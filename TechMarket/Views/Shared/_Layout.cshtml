<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel='shortcut icon' href='~/Images/icon.png' />
    <title>Technology Market</title>
    <script src="https://kit.fontawesome.com/ce42b58674.js" crossorigin="anonymous"></script>
    <link href="~/Content/style.css" rel="stylesheet" />
    @Styles.Render("~/Content/bundle")
    @Styles.Render("~/Content/DevExtremeBundle")
    @Scripts.Render("~/Scripts/bundle")
    @Scripts.Render("~/Scripts/jquery")
    @Scripts.Render("~/Scripts/DevExtremeBundle")

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.css" integrity="sha512-wR4oNhLBHf7smjy0K4oqzdWumd+r5/+6QO/vDda76MW5iug4PT7v86FoEkySIJft3XA0Ae6axhIvHrqwm793Nw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.js" integrity="sha512-WNZwVebQjhSxEzwbettGuQgWxbpYdoLf7mH+25A7sfQbbxKeS5SQ9QBf97zOY4nOlwtksgDA/czSTmfj4DUEiQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick-theme.css" integrity="sha512-6lLUdeQ5uheMFbWm3CP271l14RsX1xtx+J5x2yeIDkkiBpeVTNhTqijME7GgRKKi6hCqovwCoBTlRBEC20M8Mg==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
          rel="stylesheet" />
    <!-- MDB -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.10.1/mdb.min.css"
          rel="stylesheet" />

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" integrity="sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm" crossorigin="anonymous">
    <style>
        .a6 {
            padding-top: 10px;
            color: #242368;
        }
            .a6 span {
                color: #06c1d4;
            }
        .rounded {
            width: 80%;
        }
        .dn1 {
            width: 100px;
            background-color: #0066ff;
            border-radius: 5px;
            height: 35px;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .dn1 .dn{
            
            color: #fff !important;
        }
        .btn-db {
            width: 100px;
            background-color: #0066ff;
            border-radius: 5px;
            height: 35px;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #fff;
            margin: 0 15px;
        }
    </style>
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <!-- Container wrapper -->
        <div class="container-fluid">
            <!-- Navbar brand -->

            <a class="navbar-brand" style="padding-left:50px" href="~/Home/Index">
                <img src="~/Images/TM.png"
                     class="me-2"
                     height="50"
                     alt="MDB Logo"
                     loading="lazy" />
                <h2 class="a6">Tech<span>Market</span></h2>
            </a>
            <!-- Toggle button -->
            <button class="navbar-toggler"
                    type="button"
                    data-mdb-toggle="collapse"
                    data-mdb-target="#navbarSupportedContent"
                    aria-controls="navbarSupportedContent"
                    aria-expanded="false"
                    aria-label="Toggle navigation">
                <i class="fas fa-bars"></i>
            </button>

            <!-- Collapsible wrapper -->
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <!-- Left links -->
                <div style="padding-left:50px" class="navbar-nav me-auto mb-2 mb-lg-0">
                    @using (Html.BeginForm("Index", "Home", FormMethod.Get))
                    {
                        <div class="d-flex input-group w-auto">
                            <input type="search" name="search" style="width:300px" id="search"
                                   class="form-control rounded"
                                   placeholder="Tìm kiếm"
                                   aria-label="Search"
                                   aria-describedby="search-addon" />
                            <span class="input-group-text border-0" id="search-addon">
                                <i class="fas fa-search"></i>
                            </span>
                            <input class="btn_search" style="display:none" type="submit" value="Tìm kiếm" />
                        </div>
                    }
                </div>

                <!-- Left links -->
                <!-- Collapsible wrapper -->
                <!-- Right elements -->
                <div class="d-flex align-items-center" style="padding-right:90px">
                    @if (User.Identity.IsAuthenticated)
                    {

                        int idcust = int.Parse(User.Identity.Name);
                        TechMarket.Models.SGDFleaMarketEntities db = new SGDFleaMarketEntities();
                        var hinh = db.tbl_Account.Where(x => x.Id == idcust).ToList().FirstOrDefault();

                        <ul class="navbar-nav">
                            <!-- Dropdown -->
                            <li class="nav-item dropdown" style="padding-right:20px">
                                <a class="nav-link dropdown-toggle"
                                   href="#"
                                   id="navbarDropdownMenuLink"
                                   role="button"
                                   data-mdb-toggle="dropdown"
                                   aria-expanded="false">
                                    @{
                                        if (hinh.images != null)
                                        {
                                            <img style="border-radius: 50%;" width="30" height="30" src="../@hinh.images" alt="" />
                                        }
                                        else
                                        {
                                            <img style="border-radius: 50%;" width="30" height="30" src="https://www.nicepng.com/png/detail/128-1280406_view-user-icon-png-user-circle-icon-png.png" alt="Alt" />
                                        }
                                    }
                                    &nbsp;@GetUsername(idcust)
                                </a>
                                <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                    <li>
                                        <a class="dropdown-item" href="~/Home/profile?id=@User.Identity.Name"><i class="far fa-user-circle"></i> Thông tin cá nhân</a>
                                    </li>
                                    <li>
                                        <a class="dropdown-item" href="@Url.Action("Logout", "Home")"><i class="fas fa-sign-out-alt"></i> Đăng xuất</a>
                                    </li>
                                </ul>
                            </li>
                            <li class="nav-item dn1">
                                <a href="~/Product/Category" class="nav-link dn"><i class="bx bx-bookmark-minus"></i> Đăng Tin</a>
                            </li>

                            <li class="nav-item dropdown" style="padding-left:20px">
                                <a class="nav-link dropdown-toggle"
                                   href="#"
                                   id="navbarDropdownMenuLink1"
                                   role="button"
                                   data-mdb-toggle="dropdown"
                                   aria-expanded="false">
                                    <i class="fas fa-align-justify"></i> Khác
                                </a>
                                <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink1" style=" margin-left: -5rem;">
                                    <li>
                                        @{
                                            if (hinh.images != null)
                                            {
                                                <img style="border-radius: 50%; margin: 10px" width="30" height="30" src="../@hinh.images" alt="" />
                                            }
                                            else
                                            {
                                                <img style="border-radius:50%; margin:10px" width="30" height="30" src="https://www.nicepng.com/png/detail/128-1280406_view-user-icon-png-user-circle-icon-png.png" alt="Alt" />
                                            }
                                        }
                                        &nbsp;@GetUsername(idcust)
                                    </li>
                                    <li><hr class="dropdown-divider"></li>
                                    @{
                                        int yy = int.Parse(User.Identity.Name);
                                        var shop = db.tbl_Shop.Where(x => x.id_account == yy).FirstOrDefault();

                                    }
                                    <li>
                                        <a class="dropdown-item" href="~/Shop/index"><i class="fas fa-plus-square"></i> Tạo cửa hàng</a>
                                    </li>
                                    @if (shop != null)
                                    {
                                        int idshop = shop.Id;
                                        <li>
                                            <a class="dropdown-item" href="~/Shop/shopprofile?id=@idshop"><i class="fas fa-store"></i> Thông tin cửa hàng</a>
                                        </li>
                                    }
                                    <li><hr class="dropdown-divider"></li>
                                    <li>
                                        <a class="dropdown-item" href="~/Payment/coin"><i class="fas fa-coins"></i> Tài khoản xu</a>
                                    </li>
                                    <li>
                                        <a class="dropdown-item" href="~/Payment/History"><i class="fas fa-coins"></i> Lịch sử giao dịch</a>
                                    </li>
                                    <li><hr class="dropdown-divider"></li>
                                    <li><a class="dropdown-item" href="~/Home/profile?id=@User.Identity.Name"><i class="fas fa-id-card"></i> Cài đặt thông tin</a></li>
                                    <li><a class="dropdown-item" href="~/support/index?tro-giup=1"><i class="fas fa-question"></i> Trợ giúp</a></li>
                                </ul>
                            </li>
                        </ul>
                    }
                    else
                    {
                        <a href="~/Home/Login" class="dn"><i class="fas fa-sign-in-alt"></i> Đăng Nhập</a>
                        <a href="~/Product/Category" class="btn-db"><i class="bx bx-bookmark-minus"></i> Đăng Tin</a>
                        <a  href="~/support/index?tro-giup=1"><i class="fas fa-question"></i> Trợ giúp</a>
                        @*<a href="~/Home/RegisterAccount" class="dk"><i class="fas fa-sign-out-alt"></i> Đăng Ký</a>*@
                    }

                </div>
            </div>
            <!-- Right elements -->
        </div>
        <!-- Container wrapper -->
    </nav>

    <!-- Navbar -->
    <header class="hdh">
        <ul class="nav">
            <li>
                <a href="#" class="active">
                    <i class="fas fa-home"></i>
                    <span class="title">Trang chủ</span>
                </a>
            </li>
            <li>
                <a href="#">
                    <i class="fas fa-user"></i>
                    <span class="title">Đăng Nhập</span>
                </a>
            </li>
            <li>
                <a href="#">
                    <i class="fas fa-store-alt"></i>
                    <span class="title">Cửa Hàng</span>
                </a>
            </li>
            @*<li>
                    <a href="#">
                        <i class="far fa-bell"></i>
                        <span class="title">Thông báo</span>
                    </a>
                </li>*@
            <li>
                <a href="#">
                    <i class="fas fa-user-circle"></i>
                    <span class="title">Tài khoản</span>
                </a>
            </li>
        </ul>
    </header>

    <main role="main" class="container">
        @RenderBody()
    </main>

    <br />
    <div class="card-footer" style="background-color: #E4E9EC">
        <div class="row">
            <div class="col-sm-2"></div>
            <div class="col-sm-3">
                <h5>Hỗ trợ khách hàng</h5>
                <nav style="font-size:12px">
                    <a href="#" class="nav-link">Trung tâm trợ giúp</a>
                    <a href="#" class="nav-link">An toàn mua bán</a>
                    <a href="#" class="nav-link">Quy định cần biết</a>
                    <a href="#" class="nav-link">Quy chế quyền riêng tư</a>
                    <a href="#" class="nav-link">Liên hệ hỗ trợ</a>
                </nav>
            </div>
            <div class="col-sm-3">
                <h5>Về chúng tôi</h5>
                <nav style="font-size:12px">
                    <a href="#" class="nav-link">Giới thiệu</a>
                    <a href="#" class="nav-link">Tuyển dụng</a>
                    <a href="#" class="nav-link">Truyền thông</a>
                    <a href="#" class="nav-link">Blog</a>
                </nav>
            </div>
            <div class="col-sm-3">
                <div class="text-center">
                    <h5>Liên kết</h5>

                    <button type="button" class="btn btn-primary btn-floating mx-1">
                        <i class="fab fa-facebook-f"></i>
                    </button>

                    <button type="button" class="btn btn-primary btn-floating mx-1" style="background: #E34033;">
                        <i class="fab fa-google"></i>
                    </button>

                    <button type="button" class="btn btn-primary btn-floating mx-1" style="background: #1B9CE9;">
                        <i class="fab fa-twitter"></i>
                    </button>

                    <button type="button" class="btn btn-primary btn-floating mx-1" style="background: #000;">
                        <i class="fab fa-github"></i>
                    </button>
                    <br />
                    <br />
                    <h5>Chứng nhận</h5>
                </div>
            </div>
            <div class="col-sm-1"></div>
        </div>
        <hr />
        <center style="background-color: #000;color:white;">
            Design by Lê Minh Dũng - Khóa luận tốt nghiệp
        </center>
    </div>
    <script src="~/Scripts/jquery.signalR-2.4.2.js"></script>
    <script src="~/signalr/hubs"></script>
    <!-- MDB -->
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.10.1/mdb.min.js">
    </script>
    <script>
        $(document).ready(function () {
            $(".menu_product").slick({
                infinite: false,
                speed: 300,
                slidesToShow: 4,
                prevArrow:
                    '<div class="slick-prev"><i class="bx bx-chevron-left"></i></div>',
                nextArrow:
                    '<div class="slick-next"><i class="bx bx-chevron-right" ></i></div>',
            });
        });
        ///for DevExtreme
        function SoThuTu(container, e) {
            var index = e.component.pageIndex() * e.component.pageSize() + e.rowIndex + 1;
            container.text(index);
        }
    </script>
</body>

</html>

@using TechMarket.Models;

@functions{
    SGDFleaMarketEntities _Context = new SGDFleaMarketEntities();
    public string GetUsername(int userId)
    {
        return _Context.tbl_Account.FirstOrDefault(x => x.Id == userId).fullname;
    }
}